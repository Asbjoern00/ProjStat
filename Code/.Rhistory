setwd("C:/Users/asr/OneDrive - Capital Four Management Fondsmæglerselskab A S/Desktop/ProjStat/Code")
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
options(error = recover)
#SIMULATION SETTINGS
nsim <- 150
n <- 100
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
prp_rf_ib <- RF$new(A~., name = "RF prp",oob = FALSE, autotune =FALSE,list("num.trees" = 1000))
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = TRUE, autotune =FALSE, hyperparams = list("num.trees" = 1000))
prp_corr_spec <- GLM$new(A~w1+w2+w3-1, name = "GLM prp")
#Create list of Experiment objects to illustrate the importance of the rate criterion for convergence.
#All optimize the parameters of the random forest automatically
#All use cross-fitting to eliminate bias from overfitting
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_ib
# 2. prp_rf_ib and mean_rf_ib
# 3. Increasing K of 1.
# 4. Increasing K of 2.
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_corr_spec, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)#,
#Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_corr_spec, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)
#Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_rf_ib, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim),
#Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_rf_ib, mean_lrn = mean_rf_ib,cross_fit = 10), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
#Save results in folder
#saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/rate_experiment1000.rds")
}
exps[[1]]
exps[[1]]$plotdist()
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
options(error = recover)
#SIMULATION SETTINGS
nsim <- 150
n <- 1000
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
prp_rf_ib <- RF$new(A~., name = "RF prp",oob = FALSE, autotune =FALSE,list("num.trees" = 1000))
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = TRUE, autotune =FALSE, hyperparams = list("num.trees" = 1000))
prp_corr_spec <- GLM$new(A~w1+w2+w3-1, name = "GLM prp")
#Create list of Experiment objects to illustrate the importance of the rate criterion for convergence.
#All optimize the parameters of the random forest automatically
#All use cross-fitting to eliminate bias from overfitting
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_ib
# 2. prp_rf_ib and mean_rf_ib
# 3. Increasing K of 1.
# 4. Increasing K of 2.
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_corr_spec, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)#,
#Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_corr_spec, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)
#Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_rf_ib, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim),
#Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_rf_ib, mean_lrn = mean_rf_ib,cross_fit = 10), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
#Save results in folder
#saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/rate_experiment1000.rds")
}
exps[[1]]
exps[[1]]$plotdist()
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
options(error = recover)
#SIMULATION SETTINGS
nsim <- 250
n <- 1000
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
prp_rf_ib <- RF$new(A~., name = "RF prp",oob = FALSE, autotune =FALSE,list("num.trees" = 1000))
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = FALSE, autotune =FALSE, hyperparams = list("num.trees" = 1000))
prp_corr_spec <- GLM$new(A~w1+w2+w3-1, name = "GLM prp")
#Create list of Experiment objects to illustrate the importance of the rate criterion for convergence.
#All optimize the parameters of the random forest automatically
#All use cross-fitting to eliminate bias from overfitting
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_ib
# 2. prp_rf_ib and mean_rf_ib
# 3. Increasing K of 1.
# 4. Increasing K of 2.
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_corr_spec, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_rf_ib, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_corr_spec, mean_lrn = mean_rf_ib,cross_fit = 10), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_rf_ib, mean_lrn = mean_rf_ib,cross_fit = 10), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
#Save results in folder
saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/rate_experiment.rds")
}
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
options(error = recover)
#SIMULATION SETTINGS
nsim <- 250
n <- 1000
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
prp_rf_ib <- RF$new(A~., name = "RF prp",oob = FALSE, autotune =FALSE,list("num.trees" = 1000))
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = FALSE, autotune =FALSE, hyperparams = list("num.trees" = 1000))
prp_corr_spec <- GLM$new(A~w1+w2+w3-1, name = "GLM prp")
#Create list of Experiment objects to illustrate the importance of the rate criterion for convergence.
#All optimize the parameters of the random forest automatically
#All use cross-fitting to eliminate bias from overfitting
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_ib
# 2. prp_rf_ib and mean_rf_ib
# 3. Increasing K of 1.
# 4. Increasing K of 2.
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_corr_spec, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_rf_ib, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_corr_spec, mean_lrn = mean_rf_ib,cross_fit = 10), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = prp_rf_ib, mean_lrn = mean_rf_ib,cross_fit = 10), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
#Save results in folder
saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/rate_experiment.rds")
}
readRDS("/home/asr/Desktop/ProjStat/Code/RandomForestExp/rate_experiment.rds")
exps <- readRDS("/home/asr/Desktop/ProjStat/Code/RandomForestExp/rate_experiment.rds")
exps[[1]]
exps[[1]]$plotdist()
exps[[2]]$plotdist()
exps[[3]]$plotdist()
exps[[4]]$plotdist()
exps
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
#options(error = recover, warn = 2)
#SIMULATION SETTINGS
nsim <- 250
n <- 1000
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
rf_hyperparams <- list(
num.tree = 1000
)
corr_spec_prp <- GLM$new(A ~ w1+w2+w3-1, name = "GLM corr. spec.")
mean_rf_oob <- RF$new(Y~., name = "RF mean OOB",oob = TRUE, hyperparams =rf_hyperparams)
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = FALSE, hyperparams =rf_hyperparams)
#Create list of Experiment objects to illustrate difference between using inbag and out of bag samples for random forests
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_oob
# 2. corr_spec_prp and mean_rf_ib
# 3. corr_spec_prp and mean_rf_ib but with cross-fit set to 2
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_oob,cross_fit = FALSE) , n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = FALSE), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
}
#Save results in folder
saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/oob_experiment.rds")
exps
exps
exps[[¡]]
exps[[1]]
exps[[1]]$plotdist()
exps[[2]]$plotdist()
exps[[3]]$plotdist()
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
#options(error = recover, warn = 2)
#SIMULATION SETTINGS
nsim <- 250
n <- 1000
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
rf_hyperparams <- list(
num.tree = 1000
)
corr_spec_prp <- GLM$new(A ~ w1+w2+w3-1, name = "GLM corr. spec.")
mean_rf_oob <- RF$new(Y~., name = "RF mean OOB",oob = TRUE, hyperparams =rf_hyperparams)
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = FALSE, hyperparams =rf_hyperparams)
#Create list of Experiment objects to illustrate difference between using inbag and out of bag samples for random forests
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_oob
# 2. corr_spec_prp and mean_rf_ib
# 3. corr_spec_prp and mean_rf_ib but with cross-fit set to 2
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_oob,cross_fit = FALSE) , n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = FALSE), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
}
#Save results in folder
saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/oob_experiment.rds")
pred
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
#options(error = recover, warn = 2)
#SIMULATION SETTINGS
nsim <- 250
n <- 1000
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
rf_hyperparams <- list(
num.tree = 1000
)
corr_spec_prp <- GLM$new(A ~ w1+w2+w3-1, name = "GLM corr. spec.")
mean_rf_oob <- RF$new(Y~., name = "RF mean OOB",oob = TRUE, hyperparams =rf_hyperparams)
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = FALSE, hyperparams =rf_hyperparams)
#Create list of Experiment objects to illustrate difference between using inbag and out of bag samples for random forests
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_oob
# 2. corr_spec_prp and mean_rf_ib
# 3. corr_spec_prp and mean_rf_ib but with cross-fit set to 2
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_oob,cross_fit = FALSE) , n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = FALSE), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
}
#Save results in folder
saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/oob_experiment.rds")
self
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
#options(error = recover, warn = 2)
#SIMULATION SETTINGS
nsim <- 250
n <- 1000
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
rf_hyperparams <- list(
num.tree = 1000
)
corr_spec_prp <- GLM$new(A ~ w1+w2+w3-1, name = "GLM corr. spec.")
mean_rf_oob <- RF$new(Y~., name = "RF mean OOB",oob = TRUE, hyperparams =rf_hyperparams)
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = FALSE, hyperparams =rf_hyperparams)
#Create list of Experiment objects to illustrate difference between using inbag and out of bag samples for random forests
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_oob
# 2. corr_spec_prp and mean_rf_ib
# 3. corr_spec_prp and mean_rf_ib but with cross-fit set to 2
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_oob,cross_fit = FALSE) , n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = FALSE), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
}
#Save results in folder
saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/oob_experiment.rds")
setwd("/home/asr/Desktop/ProjStat/Code")
source("Experiment.R")
source("Estimator.R")
source("Simulator.R")
source("LearnerTypes.R")
#options(error = recover, warn = 2)
#SIMULATION SETTINGS
nsim <- 250
n <- 1000
sim <- Simulator$new(n = n, sim_cov = sim_cov, sim_A = sim_A, sim_Y = sim_Y)
rf_hyperparams <- list(
num.tree = 1000
)
corr_spec_prp <- GLM$new(A ~ w1+w2+w3-1, name = "GLM corr. spec.")
mean_rf_oob <- RF$new(Y~., name = "RF mean OOB",oob = TRUE, hyperparams =rf_hyperparams)
mean_rf_ib <- RF$new(Y~., name = "RF mean",oob = FALSE, hyperparams =rf_hyperparams)
#Create list of Experiment objects to illustrate difference between using inbag and out of bag samples for random forests
# All using TMLE as the estimator
# 1. corr_spec_prp and mean_rf_oob
# 2. corr_spec_prp and mean_rf_ib
# 3. corr_spec_prp and mean_rf_ib but with cross-fit set to 2
exps <- list(
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_oob,cross_fit = FALSE) , n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = FALSE), n_sim = nsim),
Experiment$new(sim = sim, est = TMLE$new(prp_lrn = corr_spec_prp, mean_lrn = mean_rf_ib,cross_fit = 2), n_sim = nsim)
)
# For loop to run all experiments
for(i in 1:length(exps)){
exps[[i]]$run()
}
#Save results in folder
saveRDS(exps, file = "/home/asr/Desktop/ProjStat/Code/RandomForestExp/oob_experiment.rds")
exps
exps[[1]]$plotdist()
exps[[2]]$plotdist()
exps[[3]]$plotdist()
